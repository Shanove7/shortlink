<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shanove ShortLink</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#020617', // Deep Space Blue
                            surface: '#0f172a',
                            accent: '#3b82f6', // Electric Blue
                            cyan: '#06b6d4',
                        }
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'fade-up': 'fadeUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        fadeUp: {
                            '0%': { opacity: 0, transform: 'translateY(20px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            color: #fff;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Modern Glassmorphism */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Input Glass - Fixed Height & Padding */
        .glass-input-wrapper {
            position: relative;
            background: rgba(2, 6, 23, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 1rem; /* rounded-2xl */
            transition: all 0.3s ease;
            height: 3.5rem; /* Fixed height for stability */
        }
        
        .glass-input-wrapper:focus-within {
            border-color: #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
        }

        /* Animated Background Blobs */
        .blob-bg {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
        }

        /* Hide Scrollbar */
        ::-webkit-scrollbar { width: 0; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center selection:bg-brand-accent selection:text-white">

    <!-- Background Elements -->
    <div class="blob-bg w-96 h-96 bg-blue-600/30 top-0 left-0 animate-blob"></div>
    <div class="blob-bg w-96 h-96 bg-cyan-500/30 bottom-0 right-0 animate-blob" style="animation-delay: 2s"></div>
    <div class="blob-bg w-80 h-80 bg-purple-500/20 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 animate-blob" style="animation-delay: 4s"></div>

    <!-- NAVBAR -->
    <nav class="fixed top-6 z-50 animate-fade-up">
        <div class="glass-panel px-5 py-3 rounded-full flex items-center gap-6 shadow-2xl shadow-blue-900/10">
            <!-- Logo -->
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.reload()">
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-brand-accent to-brand-cyan flex items-center justify-center shadow-lg shadow-blue-500/30">
                    <i class="fa-solid fa-link text-white text-xs"></i>
                </div>
                <span class="font-bold text-sm tracking-wide">Shanove</span>
            </div>

            <!-- Divider -->
            <div class="w-px h-4 bg-white/10"></div>

            <!-- IG Button -->
            <a href="https://www.instagram.com/shanv.konv?igsh=MWhqcndsemZkNnpueg==" target="_blank" class="flex items-center gap-2 group">
                <span class="text-xs font-medium text-slate-300 group-hover:text-white transition-colors">Instagram</span>
                <i class="fa-brands fa-instagram text-pink-500 text-lg group-hover:scale-110 transition-transform"></i>
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="w-full max-w-lg px-6 flex-grow flex flex-col justify-center pt-28 pb-10 relative z-10">
        
        <!-- Hero Text -->
        <div class="text-center mb-10 animate-fade-up" style="animation-delay: 100ms">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-3 tracking-tight leading-tight">
                Make it <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400">Short & Sweet.</span>
            </h1>
            <p class="text-slate-400 text-sm">Engine pemendek link cerdas dengan domain kustom.</p>
        </div>

        <!-- The Card -->
        <div class="glass-panel rounded-3xl p-1.5 animate-fade-up" style="animation-delay: 200ms">
            <div class="bg-brand-dark/40 rounded-[20px] p-5 border border-white/5">
                
                <!-- Tab Switcher -->
                <div class="flex bg-brand-surface/50 p-1 rounded-xl mb-6 relative border border-white/5">
                    <div id="tab-indicator" class="absolute top-1 bottom-1 left-1 w-[calc(33.33%-4px)] bg-brand-accent rounded-lg shadow-lg shadow-blue-500/20 transition-all duration-300 ease-out"></div>
                    
                    <button onclick="setProvider('shanove')" id="tab-shanove" class="flex-1 relative z-10 py-2 text-xs font-bold text-white text-center transition-colors">Shanove</button>
                    <button onclick="setProvider('is.gd')" id="tab-isgd" class="flex-1 relative z-10 py-2 text-xs font-medium text-slate-400 text-center transition-colors">Is.gd</button>
                    <button onclick="setProvider('tinyurl')" id="tab-tiny" class="flex-1 relative z-10 py-2 text-xs font-medium text-slate-400 text-center transition-colors">TinyURL</button>
                </div>

                <!-- Input Field (FIXED POSITION) -->
                <div class="space-y-4">
                    <div class="glass-input-wrapper group w-full">
                        <!-- Icon Absolute Left -->
                        <div class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-brand-accent transition-colors pointer-events-none">
                            <i class="fa-solid fa-link text-lg"></i>
                        </div>
                        
                        <!-- Input (Padding Left & Right to avoid overlap) -->
                        <input type="text" id="longUrl" placeholder="Tempel link panjang di sini..." 
                            class="w-full h-full bg-transparent border-none text-white text-sm font-medium focus:ring-0 placeholder:text-slate-600 pl-12 pr-20 rounded-2xl">
                        
                        <!-- Paste Button Absolute Right -->
                        <button onclick="pasteLink()" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/5 hover:bg-white/10 rounded-lg text-[10px] font-bold text-slate-300 transition-colors uppercase z-10 border border-white/5 active:scale-95">
                            Paste
                        </button>
                    </div>

                    <!-- Action Button -->
                    <button onclick="shorten()" id="btnAction" class="w-full relative overflow-hidden group bg-gradient-to-r from-brand-accent to-brand-cyan hover:from-blue-500 hover:to-cyan-400 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-900/20 transition-all active:scale-[0.98]">
                        <span class="relative z-10 flex items-center justify-center gap-2">
                            SHORTEN NOW <i class="fa-solid fa-wand-magic-sparkles group-hover:rotate-12 transition-transform"></i>
                        </span>
                        <div class="absolute inset-0 bg-white/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    </button>
                </div>

            </div>
        </div>

        <!-- Result Area -->
        <div id="resultArea" class="hidden mt-6 animate-fade-up">
            <div class="glass-panel rounded-3xl p-6 border-t border-brand-accent/20">
                <div class="flex flex-col items-center">
                    
                    <div class="w-20 h-20 bg-white rounded-xl p-1 mb-4 shadow-xl shadow-brand-accent/10 animate-float">
                        <img id="qrCode" src="" class="w-full h-full object-contain">
                    </div>

                    <div class="w-full bg-brand-surface rounded-xl border border-white/5 p-4 flex items-center justify-between gap-4 mb-4 group cursor-pointer" onclick="copyResult()">
                        <div class="overflow-hidden">
                            <p class="text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-0.5">Your Short Link</p>
                            <p id="shortUrlDisplay" class="text-sm font-mono text-brand-cyan font-bold truncate">...</p>
                        </div>
                        <i class="fa-regular fa-copy text-slate-400 group-hover:text-white transition-colors"></i>
                    </div>

                    <div class="flex gap-3 w-full">
                        <a id="btnOpen" href="#" target="_blank" class="flex-1 bg-white/5 hover:bg-white/10 py-3 rounded-xl text-xs font-bold text-center transition-colors border border-white/5">
                            Test Link
                        </a>
                        <button onclick="shareLink()" class="flex-1 bg-brand-accent hover:bg-blue-500 py-3 rounded-xl text-xs font-bold text-white transition-colors shadow-lg shadow-blue-500/20">
                            Share WA
                        </button>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="py-6 text-center relative z-10">
        <p class="text-[10px] text-slate-600 font-medium">
            &copy; 2026 Shanove Project.
        </p>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-24 left-1/2 -translate-x-1/2 glass-panel px-5 py-3 rounded-full flex items-center gap-3 transition-all duration-300 opacity-0 -translate-y-10 pointer-events-none z-[60] shadow-2xl">
        <div id="toast-icon"></div>
        <p id="toast-msg" class="text-xs font-bold text-white"></p>
    </div>

    <!-- Redirect Overlay (Shanove Mode) -->
    <div id="redirectOverlay" class="hidden"></div>

    <script>
        // REDIRECT LOGIC
        (function() {
            const params = new URLSearchParams(window.location.search);
            const gotoUrl = params.get('goto');
            
            if (gotoUrl) {
                document.write(`
                    <style>body{margin:0;background:#020617;display:flex;align-items:center;justify-content:center;height:100vh;color:white;font-family:sans-serif}</style>
                    <div style="text-align:center">
                        <div style="width:50px;height:50px;border:4px solid #1e293b;border-top:4px solid #3b82f6;border-radius:50%;animation:s 1s linear infinite;margin:0 auto 20px"></div>
                        <h3 style="margin:0;font-weight:700">Shanove Link</h3>
                        <p style="margin:10px 0 0;font-size:12px;color:#64748b">Mengalihkan...</p>
                    </div>
                    <style>@keyframes s{to{transform:rotate(360deg)}}</style>
                `);
                
                let target = gotoUrl;
                if (!target.startsWith('http')) target = 'https://' + target;
                
                setTimeout(() => window.location.href = target, 1200);
                throw new Error("Redirecting..."); 
            }
        })();

        // MAIN APP LOGIC
        let currentProvider = 'shanove';

        function setProvider(prov) {
            currentProvider = prov;
            const indicator = document.getElementById('tab-indicator');
            const btns = {
                'shanove': document.getElementById('tab-shanove'),
                'is.gd': document.getElementById('tab-isgd'),
                'tinyurl': document.getElementById('tab-tiny')
            };

            Object.values(btns).forEach(b => {
                b.classList.remove('text-white', 'font-bold');
                b.classList.add('text-slate-400', 'font-medium');
            });

            if (prov === 'shanove') {
                indicator.style.transform = 'translateX(0%)';
                btns['shanove'].classList.add('text-white', 'font-bold');
            } else if (prov === 'is.gd') {
                indicator.style.transform = 'translateX(100%)';
                btns['is.gd'].classList.add('text-white', 'font-bold');
            } else {
                indicator.style.transform = 'translateX(200%)';
                btns['tinyurl'].classList.add('text-white', 'font-bold');
            }

            showToast(`Mode: ${prov.charAt(0).toUpperCase() + prov.slice(1)}`, 'info');
        }

        async function shorten() {
            const input = document.getElementById('longUrl');
            const url = input.value.trim();
            const btn = document.getElementById('btnAction');

            if (!url) return showToast('Link kosong, mohon isi!', 'error');
            if (!url.startsWith('http')) return showToast('Gunakan http:// atau https://', 'error');

            const originalContent = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> MEMPROSES...';
            btn.disabled = true;

            try {
                let result = '';

                if (currentProvider === 'shanove') {
                    const baseUrl = window.location.origin + window.location.pathname;
                    result = `${baseUrl}?goto=${encodeURIComponent(url)}`;
                    await new Promise(r => setTimeout(r, 600));
                } else {
                    // Backend Proxy Endpoint (Must be deployed to Vercel with api/index.js)
                    const apiUrl = `/api/shorten?provider=${currentProvider}&url=${encodeURIComponent(url)}`;
                    const res = await fetch(apiUrl);
                    if (!res.ok) throw new Error('API Error');
                    result = await res.text();
                }

                if (!result || result.includes('Error')) throw new Error('Gagal');

                renderResult(result.trim());
                showToast('Link berhasil dibuat!', 'success');

            } catch (e) {
                console.error(e);
                showToast('Gagal memproses link.', 'error');
            } finally {
                btn.innerHTML = originalContent;
                btn.disabled = false;
            }
        }

        function renderResult(link) {
            document.getElementById('shortUrlDisplay').textContent = link;
            document.getElementById('btnOpen').href = link;
            document.getElementById('qrCode').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(link)}&bgcolor=ffffff`;
            
            const area = document.getElementById('resultArea');
            area.classList.remove('hidden');
            area.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function pasteLink() {
            navigator.clipboard.readText().then(t => {
                document.getElementById('longUrl').value = t;
                showToast('Link ditempel', 'success');
            }).catch(() => showToast('Gagal akses clipboard', 'error'));
        }

        function copyResult() {
            const txt = document.getElementById('shortUrlDisplay').textContent;
            navigator.clipboard.writeText(txt);
            showToast('Disalin ke clipboard', 'success');
        }

        function shareLink() {
            const txt = document.getElementById('shortUrlDisplay').textContent;
            window.open(`https://wa.me/?text=${encodeURIComponent('Link Pendek Shanove: ' + txt)}`, '_blank');
        }

        let toastTimer;
        function showToast(msg, type) {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toast-icon');
            const text = document.getElementById('toast-msg');

            text.innerText = msg;
            
            if (type === 'success') {
                icon.innerHTML = '<i class="fa-solid fa-check text-green-400"></i>';
            } else if (type === 'error') {
                icon.innerHTML = '<i class="fa-solid fa-xmark text-red-400"></i>';
            } else {
                icon.innerHTML = '<i class="fa-solid fa-info text-blue-400"></i>';
            }

            toast.classList.remove('opacity-0', '-translate-y-10', 'pointer-events-none');
            
            clearTimeout(toastTimer);
            toastTimer = setTimeout(() => {
                toast.classList.add('opacity-0', '-translate-y-10', 'pointer-events-none');
            }, 3000);
        }
    </script>
</body>
</html>


